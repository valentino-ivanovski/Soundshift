<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#C16148">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/stylesheets/profileStyle.css"> <!-- Link to the new CSS file -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:slnt,wght@-10..0,100..900&display=swap" rel="stylesheet">
    <title>Soundshift</title>
</head>

<body>
    <center>
        <div class="animated-bg">
            <div class="navbar">
                <a class="soundshiftText" href="/mainpage">soundshift</a>
                <ul>
                    <li><a href="/mainpage">Home</a></li>
                    <li><a href="/search">Search</a></li>
                    <li><a href="/profile/me" style="font-weight: 500;">Profile</a></li>
                </ul>
                <li><a href="/logout">Log Out</a></li>
            </div>

            <div class="content">

                <div class="centerdiv"> 
                    <h1 class="welcome">Welcome, <%= userr.username %> </h1>
                    <h2 class="location"><%= userr.location %></h2>
                    <div class="bioDiv" style="display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 10px; margin-left: 60px; margin-top: -20px;">
                        <p class="bioText"><%= userr.bio %></p>
                        <form id="editBioForm" action="/profile/me/updatebio" method="POST">
                            <input type="hidden" name="id" value="<%= userr.id %>">
                            <input type="hidden" id="newBio" name="bio">
                            <button type="submit" class="bioButton">Edit Bio</button>
                        </form>
                    </div>
                </div>

            </div>

            <div class="footer">
                Made by: <a href="https://github.com/valentino-ivanovski" style="color: inherit;">Valentino
                    Ivanovski</a> for Systems 3 - 2024
                - Welcome, <strong>
                    <%= user.username %>
                </strong>
            </div>

        </div>
        <script>
            document.querySelector('.bioButton').addEventListener('click', function(e) {
                e.preventDefault();
                var newBio = prompt("Please enter your new bio:");
                if (newBio !== null) {
                    document.querySelector('#newBio').value = newBio;
                    document.querySelector('.bioText').textContent = newBio;
                    document.querySelector('#editBioForm').submit();
                }
            });
            </script>
    </center>
</body>